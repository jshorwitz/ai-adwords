# Render.com deployment configuration
databases:
  - name: ai-adwords-postgres
    databaseName: ai_adwords
    user: ads_user
    plan: starter

services:
  - type: web
    name: ai-adwords-app
    runtime: python3
    buildCommand: "pip install poetry && poetry install --only=main"
    startCommand: "python start_app.py"
    plan: starter
    
    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: PYTHONDONTWRITEBYTECODE  
        value: "1"
      - key: HOST
        value: "0.0.0.0"
      - key: PORT
        value: "10000"
      - key: LOG_LEVEL
        value: "info"
      - key: RELOAD
        value: "false"
        
      # Safety settings
      - key: MOCK_REDDIT
        value: "true"
      - key: MOCK_TWITTER
        value: "true"
      - key: ENABLE_REAL_MUTATES
        value: "false"
        
      # Database URL will be auto-generated by Render
      - key: DATABASE_URL
        fromDatabase:
          name: ai-adwords-postgres
          property: connectionString
          
      # Generate secure secret key
      - key: SECRET_KEY
        generateValue: true
      - key: JWT_SECRET_KEY  
        generateValue: true
    
    healthCheckPath: "/health"
    
    # Auto-deploy from GitHub
    autoDeploy: true
